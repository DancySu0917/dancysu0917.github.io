# 变量提升与函数提升的区别？（必会）

**题目**: 变量提升与函数提升的区别？（必会）

## 答案

变量提升（Variable Hoisting）和函数提升（Function Hoisting）是JavaScript中两个不同的概念，它们在提升机制、执行时机和处理方式上存在显著区别：

### 1. 提升机制的区别

#### 变量提升
- 使用`var`声明的变量会被提升到函数或全局作用域的顶部
- 只有声明被提升，赋值操作保留在原位置
- 提升后初始值为`undefined`

```javascript
console.log(a); // undefined (不是ReferenceError)
var a = 10;
console.log(a); // 10

// 实际执行过程：
// var a;        // 声明被提升，初始值为undefined
// console.log(a); // undefined
// a = 10;       // 赋值保留在原位置
// console.log(a); // 10
```

#### 函数提升
- 整个函数声明（包括函数体）会被完整地提升到作用域顶部
- 函数表达式不会被提升

```javascript
// 函数声明会被完整提升
sayHello(); // "Hello!" - 可以正常执行

function sayHello() {
    console.log("Hello!");
}

// 函数表达式不会被提升
try {
    sayHi(); // TypeError: Cannot access 'sayHi' before initialization
} catch(e) {
    console.log(e.message);
}

const sayHi = function() {
    console.log("Hi!");
};
```

### 2. 优先级的区别

函数提升的优先级高于变量提升，当函数名和变量名相同时：

```javascript
console.log(typeof foo); // "function"

function foo() {
    return 1;
}

var foo = 2;

// 实际执行过程：
// function foo() { return 1; }  // 函数声明被提升
// var foo;                     // 变量声明被提升（但不重复）
// console.log(typeof foo);     // "function"
// foo = 2;                     // 变量赋值保留在原位置
```

### 3. 不同声明方式的区别

#### var声明
- 只提升声明，不提升赋值
- 初始值为undefined

```javascript
console.log(x); // undefined
var x = 5;
```

#### let和const声明
- 也会被提升，但存在"暂时性死区"
- 在声明之前访问会报错

```javascript
console.log(y); // ReferenceError: Cannot access 'y' before initialization
let y = 10;

console.log(z); // ReferenceError: Cannot access 'z' before initialization
const z = 15;
```

#### 函数声明 vs 函数表达式
- 函数声明：整个函数被提升
- 函数表达式：作为赋值语句，只有变量声明被提升

```javascript
// 函数声明 - 整体提升
hoistedFunction(); // "I am hoisted!"

function hoistedFunction() {
    console.log("I am hoisted!");
}

// 函数表达式 - 只有变量声明被提升
try {
    notHoisted(); // TypeError: notHoisted is not a function
} catch(e) {
    console.log(e.message);
}

var notHoisted = function() {
    console.log("I am not hoisted!");
};
```

### 4. 实际示例对比

#### 变量提升示例
```javascript
console.log(variable); // undefined
var variable = 'Hello';
console.log(variable); // 'Hello'
```

#### 函数提升示例
```javascript
functionDeclaration(); // "I am a function declaration"
function functionDeclaration() {
    console.log("I am a function declaration");
}
```

#### 混合情况示例
```javascript
var myFunc = 'hello';
function myFunc() {
    return 'world';
}

console.log(typeof myFunc); // "string" - 变量赋值覆盖了函数
```

### 5. 总结

| 特性 | 变量提升 | 函数提升 |
|------|----------|----------|
| 提升内容 | 只有声明 | 完整的函数定义 |
| 初始值 | undefined | 完整函数 |
| 优先级 | 较低 | 较高 |
| 重复声明 | 同名变量会被忽略 | 函数会覆盖变量 |

理解这些区别对于编写可预测的JavaScript代码非常重要，特别是在处理复杂的变量和函数声明时。
