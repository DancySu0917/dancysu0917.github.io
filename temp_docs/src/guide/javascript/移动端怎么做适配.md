# 移动端怎么做适配？（了解）

**题目**: 移动端怎么做适配？（了解）

**答案**:

移动端适配是前端开发中的重要课题，主要目的是让网页在不同尺寸和分辨率的移动设备上都能有良好的显示效果。以下是几种主要的适配方案：

## 1. 视口（Viewport）设置

```html
<!-- 设置视口，使页面适应设备宽度 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
```

## 2. 媒体查询（Media Queries）

使用 CSS 媒体查询针对不同屏幕尺寸应用不同的样式：

```css
/* 基础样式 */
.container {
  width: 100%;
  padding: 20px;
}

/* 平板设备 */
@media screen and (max-width: 768px) {
  .container {
    padding: 15px;
  }
  
  .grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* 手机设备 */
@media screen and (max-width: 480px) {
  .container {
    padding: 10px;
  }
  
  .grid {
    grid-template-columns: 1fr;
  }
  
  .nav-menu {
    display: none;
  }
  
  .mobile-nav {
    display: block;
  }
}
```

## 3. REM 布局（弹性布局）

REM 是相对于根元素（html）字体大小的单位，通过动态设置根字体大小实现适配：

```javascript
// 根据设备宽度动态设置根字体大小
function setRootFontSize() {
  const deviceWidth = document.documentElement.clientWidth || document.body.clientWidth;
  const baseSize = 16; // 基准字体大小
  const designWidth = 375; // 设计稿宽度（iPhone6/7/8）
  
  // 计算缩放比例
  const scale = deviceWidth / designWidth;
  const rootFontSize = baseSize * scale;
  
  document.documentElement.style.fontSize = rootFontSize + 'px';
}

// 页面加载和窗口大小改变时设置
window.addEventListener('resize', setRootFontSize);
window.addEventListener('DOMContentLoaded', setRootFontSize);

// 确保页面加载时也能正确计算
setRootFontSize();
```

```css
/* 使用 rem 单位进行布局 */
.header {
  height: 3rem; /* 实际高度会根据根字体大小缩放 */
  padding: 0.5rem;
}

.content {
  font-size: 0.875rem; /* 14px */
  line-height: 1.25rem; /* 20px */
}
```

## 4. VW 布局（视口宽度单位）

VW 是相对于视口宽度的单位，1vw 等于视口宽度的 1%：

```css
/* 使用 vw 单位进行布局 */
.container {
  width: 100vw; /* 容器宽度为视口宽度的 100% */
  padding: 5vw; /* 内边距为视口宽度的 5% */
}

.title {
  font-size: 4.26vw; /* 根据设计稿计算 (16/375)*100 */
}

.button {
  width: 80vw;
  height: 12vw;
  font-size: 3.73vw; /* 根据设计稿计算 */
}
```

## 5. Flexbox 弹性布局

使用 Flexbox 实现灵活的布局适配：

```css
.flex-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.flex-item {
  flex: 1 1 auto;
  min-width: 100px;
  max-width: 200px;
}

/* 在小屏幕上调整布局 */
@media (max-width: 480px) {
  .flex-item {
    flex: 1 1 100%;
    max-width: 100%;
  }
}
```

## 6. 响应式图片

使用响应式图片确保在不同设备上都有良好的显示效果：

```html
<!-- 使用 srcset 提供不同分辨率的图片 -->
<img src="image-400.jpg" 
     srcset="image-400.jpg 400w, 
             image-800.jpg 800w, 
             image-1200.jpg 1200w"
     sizes="(max-width: 480px) 100vw, 
            (max-width: 768px) 50vw, 
            33vw"
     alt="响应式图片">

<!-- 使用 picture 元素提供不同格式的图片 -->
<picture>
  <source srcset="image.webp" type="image/webp">
  <source srcset="image.jpg" type="image/jpeg">
  <img src="image.jpg" alt="图片描述">
</picture>
```

## 7. 字体适配

```css
/* 使用相对单位和最小最大值限制 */
.text {
  font-size: calc(16px + 0.5vw); /* 根据视口宽度动态调整 */
  font-size: clamp(14px, 2.5vw, 18px); /* 设置最小值、首选值和最大值 */
}

/* 针对不同设备设置不同字体大小 */
@media screen and (max-width: 320px) {
  .text {
    font-size: 14px;
  }
}

@media screen and (min-width: 375px) and (max-width: 414px) {
  .text {
    font-size: 16px;
  }
}

@media screen and (min-width: 415px) {
  .text {
    font-size: 18px;
  }
}
```

## 8. 完整的移动端适配解决方案示例

```javascript
// 移动端适配工具类
class MobileAdapter {
  constructor(options = {}) {
    this.designWidth = options.designWidth || 375; // 设计稿宽度
    this.rem2px = options.rem2px || 16; // 1rem 对应的像素值
    this.maxWidth = options.maxWidth || 540; // 最大适配宽度
    this.minWidth = options.minWidth || 320; // 最小适配宽度
    
    this.init();
  }
  
  init() {
    this.setRootFontSize();
    this.bindEvents();
  }
  
  setRootFontSize() {
    const deviceWidth = Math.min(
      Math.max(document.documentElement.clientWidth, this.minWidth), 
      this.maxWidth
    );
    
    const scale = deviceWidth / this.designWidth;
    const rootFontSize = this.rem2px * scale;
    
    document.documentElement.style.fontSize = rootFontSize + 'px';
  }
  
  bindEvents() {
    // 监听屏幕旋转和窗口大小变化
    window.addEventListener('resize', () => {
      this.setRootFontSize();
    });
    
    // 监听屏幕方向变化
    window.addEventListener('orientationchange', () => {
      // 延迟执行以确保获取正确的尺寸
      setTimeout(() => {
        this.setRootFontSize();
      }, 100);
    });
  }
}

// 初始化移动端适配
const adapter = new MobileAdapter({
  designWidth: 375, // 以 iPhone6/7/8 为设计基准
  rem2px: 16,      // 1rem = 16px
  maxWidth: 540,   // 最大适配到 540px 宽度
  minWidth: 320    // 最小适配到 320px 宽度
});
```

## 9. 现代 CSS 单位和函数

```css
/* 使用 clamp() 函数实现流体排版 */
.title {
  font-size: clamp(1.2rem, 2.5vw, 2rem);
}

/* 使用 min() 和 max() 函数 */
.container {
  width: min(100%, 1200px); /* 最大宽度不超过 1200px */
  padding: max(1rem, 4vw); /* 响应式内边距 */
}
```

## 10. 实际项目中的适配策略

在实际项目中，通常会结合多种适配方案：

1. **使用 REM + 媒体查询**：对于大部分布局元素
2. **使用 VW**：对于需要精确按比例缩放的元素
3. **使用 Flexbox/Grid**：对于复杂的布局结构
4. **使用响应式图片**：对于图片资源
5. **使用视口单位和现代 CSS 函数**：对于流体设计

选择合适的适配方案需要考虑项目需求、设计规范、目标设备等因素。
